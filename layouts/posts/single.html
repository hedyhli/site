{{ define "main" -}}
<div itemscope itemtype="https://schema.org/BlogPosting" class="h-entry">
  <article itemprop="mainEntityOfPage">
    <header id="post-header">
      <h1 itemprop="name headline" class="p-name">{{ .Title }}</h1>
      <div class="post-meta">
        <p>
        <time itemprop="datePublished" datetime="{{ .Date.UTC.Format "2006-01-02T15:04:05Z" }}">{{ .Date.Format "Jan 02, 2006" }}</time>
          {{- partial "lastmod.html" (dict "Page" . "Prefix" "&nbsp; · &nbsp;" ) }}
          &nbsp;·&nbsp; {{ .WordCount }} words
        </p>
  <p>{{ partial "tags.html" (dict "Page" .) }}</p>
        <hr />
      </div>
    </header>
    <section class="e-content {{ .Params.font }}" itemprop="articlebody">
      {{ partial "processed-content" . -}}
    </section>
  </article>
</div>
{{- end }}
{{- define "after" }}
<hr style="margin-bottom:0;" />
{{ $subject := printf "Re: %s" .Title }}
<p class="post-actions" style="margin-bottom: 0; text-align: center;">
  <a href="{{ .Site.Params.srcURLPrefix }}content/{{ .File.Path }}">Suggest an edit</a>
  &nbsp; · &nbsp;
  <a href="mailto:{{ .Site.Author.email }}?subject={{ $subject }}">Reply via email</a>
</p>
<hr style="margin-bottom:0;" />

<p id="-interact"><strong>Interact</strong></p>
<p>You can interact with this post using {{ with .Params.Syndications }}the following syndications, or with {{ end }}<a href="#-webmentions">Webmentions</a>.</p>
{{ with .Params.Syndications }}
  <section class="syndication">
    <p>This post has been syndicated on:</p>
    <ul>
      {{ range . }}
      <li>
      {{ with .mastodon }}<a href="{{ . }}">Mastodon</a> on the Fediverse
      {{ else }}
      {{ with .list }}<a href="{{ . }}">My blog-post mailing list</a>{{ end }}
      {{ end }}
      </li>
      {{ end }}
    </ul>
  </section>
  <br />
{{ end }}
<section class="mentions" id="-webmentions">
  <p><strong>Webmentions</strong></p>
  <p>Web pages that mention this post will show up here via <a href="https://indieweb.org/Webmention">Webmentions</a>.</p>
  <details open="">
    <summary>Send a webmention</summary>
    <p>Write a response on your own website, link to this page, then submit your URL here to send a webmention.</p>
    <form itemprop="potentialAction" itemscope="" itemtype="https://schema.org/CommentAction" action="https://webmention.io/home.hedy.dev/webmention" method="post">
      <meta itemprop="actionStatus" content="PotentialActionStatus">
      <input type="hidden" name="target" value="{{ .Permalink }}">
      <label for="wmsrc">URL</label>
      <div style="display: flex; justify-content: space-between; gap: .5rem; height: 2.5rem;">
        <input style="flex-grow: 2; margin: 0;" id="wmsrc" type="url" autocomplete="on" required="" name="source">
        <input style="flex-shrink: 2; height: 100%; margin: 0;" type="submit" value="ping!">
      </div>
    </form>
  </details>
  {{ partial "webmentions.html" (dict "Page" .) }}
</section>
{{- end }}
