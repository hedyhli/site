/*
 * Mostly based on simplecss.org
 * Also based on cssbed, forgot which theme exactly, might be bamboo or
 * "evenbettermotherfucking"
 *
 * Inspirations:
 * - seirdy.one
 * - kevq.uk
 * - smol.pub
 * - drewdevault.com
 * - gregoryhammond.ca
 */

:root {
  --base-fontsize: 1rem;

  /* Major third scale progression - see https://type-scale.com/ */
  --header-scale: 1.25;
  /* I don't want h1, h2, and h3 to be too big */
  --header-scale-minor: 1.1;

  /* Line height is set to the "Golden ratio" for optimal legibility */
  --line-height: 1.618;
  --standard-border-radius: 0;

	--text-font: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
	--alt-font: "IBM Plex Sans", var(--text-font);
	--heading-font: "IBM Plex Sans", var(--text-font);
	--body-font: var(--text-font);
  --mono-font: "IBM Plex Mono", "Fira Code", Hack, Consolas, Menlo, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
  --body-mono-font: "iA Writer Duo", "iA Writer Mono", var(--mono-font);

  --bg: hsl(220deg, 23%, 97%);
  --accent-bg: #dce0e8;
  --accent-bg-light: #ebeef2;
  --code-bg: #fbfcff;
  --text: #323442;
  --text-light: #7c7f93;
  --non-text-light: #9ca0b0;

  --border: #8c8fa1;
  --border-light: #c7cbd9;
  --accent: #1e66f5;
  --accent-light: #7287fd;
  --button-bg: #89b4fa;
  --button-border: var(--button-bg);
  --button-text: var(--text);
  --button-hover: var(--bg);
  --code: var(--text);
  --preformatted: var(--code);
  --marked: #e5c890;
  --disabled: #efefef;

  --link: #1e66f5;
  --link-visited: #7287fd;
  --link-alt: var(--link);

  --selection-bg: rgba(114, 135, 253, 20%);
  --headings: #54587b;
}

@media (max-width: 600px) {
  :root {
    /* Major second */
    --header-scale: 1.125;
  }
}

:root {
  --rosewater: #dc8a78;
  --flamingo: #dd7878;
  --pink: #ea76cb;
  --mauve: #8839ef;
  --red: #d20f39;
  --maroon: #e64553;
  --peach: #fe640b;
  --yellow: #df8e1d;
  --green: #40a02b;
  --teal: #179299;
  --sky: #04a5e5;
  --sapphire: #209fb5;
  --blue: #1e66f5;
  --lavender: #7287fd;
}

::selection {
  background-color: var(--selection-bg);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #232326;
    --accent-bg: #44475a;
    --accent-bg-light: #303035;
    --code-bg: #3e3e4b;
    --text: #dfdfe6;
    --text-light: #b8b8c6;
    --non-text-light: #999fbf;

    --button-bg: #555a79;
    --button-border: #a5aac6;

    --border: #aaa;
    --border-light: #565656;
    --accent: #8be9fd;
    --accent-light: #ece1a1;
    --code: #f06292;
    --preformatted: #ccc;
    --disabled: #111;

    --link: #cddfff;
    --link-visited: #c3b1ff;
    --link-alt: var(--accent-light);
  }

  img:not(.pfp), video {
    opacity: .6;
  }

  .interactions img {
    opacity: 1;
  }

  .badges img, img.no-dim {
    opacity: 1;
  }
}

body {
	background-color: var(--bg);
	color: var(--text);
	font-family: var(--text-font);
	font-size: var(--base-fontsize);
	line-height: var(--line-height);

	margin: auto;
}

/*******************************************************************
 * Body elements
 */
h1, h2, h3, h4, h5, h6 {
	margin-bottom: 1.1rem;
	font-family: var(--heading-font);
}
h2, h3, h4, h5, h6 {
  color: var(--headings);
}
h1 {
	font-size: calc(var(--base-fontsize) * var(--header-scale) * var(--header-scale) * var(--header-scale-minor) * var(--header-scale-minor));
	margin-top: calc(var(--line-height) * 1.3rem);
}
h2 {
	font-size: calc(var(--base-fontsize) * var(--header-scale) * var(--header-scale-minor) * var(--header-scale-minor));
	margin-top: calc(var(--line-height) * 1.1rem);
}
h3 {
	font-size: calc(var(--base-fontsize) * var(--header-scale) * var(--header-scale-minor));
}
h4 {
	font-size: calc(var(--base-fontsize) * var(--header-scale));
}
h5 {
	font-size: var(--base-fontsize);
}
h6 {
	font-size: calc(var(--base-fontsize) / var(--header-scale));
}

blockquote {
	margin-left: 0;
	padding-left: 1.25rem;
	border-left: 3px solid var(--text-light);
	opacity: .82;
}

table {
	border-collapse: collapse;
	width: 100%;
}
table caption {
	font-weight: bold;
	margin-bottom: .5rem;
}
table.no-header thead {
  display: none;
}
td,
th {
	border: 1px solid var(--border-light);
	text-align: left;
	padding: .5rem;
}
th:empty {
    visibility: hidden;
}
th {
	background: var(--accent-bg-light);
	font-weight: bold;
}

small {
    font-size: .8rem;
    color: var(--text-light);
}

ul li {
    /* Fix sizing of tap target when it's a list of links */
    margin-bottom: 0.5rem;
}

/* Use mono font for code like elements */
code,
pre,
pre span,
kbd,
samp {
	font-family: var(--mono-font);
	font-size: 98%;
}

/* Inline code snips hopefully */
:not(pre)>code, :not(pre)>samp, kbd {
    background-color: var(--code-bg);
    border: 1px solid var(--border-light);
    /* border-radius: 6px; */
    padding: .01em .1em;
}

kbd {
	color: var(--preformatted);
	border: 1px solid var(--preformatted);
	border-bottom: 3px solid var(--preformatted);
	border-radius: 5px;
	padding: .1rem;
}

/* This would be overridden by chroma if the page wants highlighting */
pre {
	padding: .8rem 1rem;
	max-width: 100%;
	overflow: auto;
	color: var(--preformatted);
	background: var(--accent-bg-light);
	border: 2px solid var(--border-light);
	border-radius: 0;
}

/* Fix embedded code within pre */
pre code {
	color: var(--preformatted);
	background: none;
	margin: 0;
	padding: 0;

	tab-size: 4;
}

fieldset {
	border: 0;
	padding: 0;
	margin: 0;
}

hr {
	color: var(--border-light);
	border-color: var(--border-light);
	border-style: solid;
	border-width: 1px;
	margin: 1rem auto;
}

mark {
	padding: 2px 5px;
	border-radius: 4px;
	background: var(--marked);
}

main img, main video {
	max-width: 100%;
	border-radius: 5px;
}

figure {
	margin: 0;
}

figcaption {
	font-size: .9rem;
	color: var(--text-light);
	text-align: center;
	margin-bottom: 1rem;
}

/* Format the expanding box */
details {
	padding: .6rem 1rem;
	border: 2px solid var(--border-light);
	margin-bottom: 1rem;
}

summary {
	cursor: pointer;
	font-weight: bold;
}

details[open] {
	padding-bottom: .75rem;
}

details[open] summary {
	margin-bottom: .5rem;
}

details[open]>*:last-child {
	margin-bottom: 0;
}

/*******************************************************************
 * Nav
 */
nav {
    margin-right: 5%;
    margin-left: 5%;
    margin-bottom: 4rem;
    padding: 1rem 0.3rem;
    font-weight: 500;
}

nav div {
    display: inline;
}

nav a {
	text-decoration: none;
  margin-top: 1rem;
  font-weight: 600;
  border: 1px solid var(--bg);
  padding: .75rem .75rem;
}
nav a, nav a:visited {
  color: #5c5f77;
}
nav a:not(:has(.pfp)):hover, nav a:not(:has(.pfp)):visited:hover {
  color: var(--flamingo);
  transition: .25s;
  background-color: var(--accent-bg-light);
  /* background-image: linear-gradient(150deg, var(--lavender), transparent 90%); */
  /* background-image: linear-gradient(150deg, var(--yellow) 10%, var(--mauve) 50%, var(--blue) 60%); */
  /* background-clip: text; */
  /* -webkit-background-clip: text; */
  /* -webkit-text-fill-color: transparent; */
}

@media (max-width: 600px) {
    /* Center-aligned nav on mobile */
    nav {
        margin: 0;
        margin-top: 1.25rem;
        padding-top: 0;
        padding-left: 1rem;
        padding-right: 1rem;
    }
    nav li:has(#home) {
        display: none;
    }
    nav.index {
        text-align: center;
        padding: 0;
    }
    nav a {
        padding: .75rem .5rem
    }
}
@media (max-width: 350px) {
    nav a {
        padding: .75rem .2rem
    }
}

/* Idea from seirdy.one to have unstyled unordered-list nav */
nav ul {
	padding: 0;
	padding-bottom: 0.5rem;
}
nav ul li, nav strong > a {
	display: inline-block;
}

.pfp {
    border: 1px solid var(--border);
    border-radius: 100%;
}

nav .pfp {
  height: 1.75rem;
  vertical-align: middle;
}

h1 .pfp {
    height: 2.5rem;
    vertical-align: text-top;
}

/*******************************************************************
 * Homepage
 */
.accent-bar {
  display: grid;
  grid-template-columns: repeat(14,1fr);
  width: 100%;
  height: 8px;
  background-color: var(--mauve);
  background-image: linear-gradient(90deg,var(--rosewater),var(--flamingo),var(--mauve),var(--red),var(--maroon),var(--peach),var(--green),var(--teal),var(--sky),var(--sapphire),var(--blue));
  background-size: 400% 100%;
  background-position: left;
  animation: gradient 1s linear infinite forwards;
}
.hero {
    padding-top: 2rem;
    padding-bottom: 5rem;
    text-align: center;
}

.hero h1 {
    font-size: 2.2rem;
}

.blink {
    opacity: 0;
    color: var(--text-light);
    animation: blinker 1s step-start 5;
    font-family: var(--mono-font);
}
@keyframes blinker {
    50% {
        opacity: 100%;
    }
}

.webrings {
  text-align: center;
}
.webrings ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
@media (min-width: 601px) {
  /* Two columns on desktop */
  .webrings ul {
    display: flex;
    flex-wrap: wrap;
  }
  .webrings li {
    width: calc(50% - 0.5rem);
  }
  .webrings li p {
    margin: 0;
  }
  .webrings li:nth-child(odd) {
    margin-right: 1rem;
  }
  /* If there's an even number of children, make the first one take the full
   * width */
  .webrings :has(li :last-child:nth-child(odd)) li:first-child {
    width: 100%;
  }
  .webrings :has(li :last-child:nth-child(odd)) li:nth-child(odd) {
    margin-right: 0;
  }
  .webrings :has(li :last-child:nth-child(odd)) li:nth-child(even) {
    margin-right: 1rem;
  }
}
.webrings li p {
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: 1rem;
  text-align: center;
	vertical-align: middle;
  margin-top: 0;
	padding: 0.2rem 1rem;
	border: 1px solid var(--border-light);
	background-color: var(--accent-bg-light);
}
.webrings li {
  margin-bottom: 1.2rem;
}
.webrings a.arrow {
  font-size: 1.5rem;
  text-decoration: none;
}

.badges img {
  height: 40px;
}

/*******************************************************************
 * Page sections
 */
main, .after-content {
    /* For better reading experience.
     * I don't want paragraphs to be too narrow, it looks ugly; Though I don't
     * want them to be too wide, either. Reading experience is important:
     * https://en.wikipedia.org/wiki/Eye_movement_in_reading */
	max-width: 45rem;

	margin: auto;
	padding: 0 5%;
}

/* Tags */
.post-list .tags, .post-list time {
	font-size: .9rem;
}
.tags a,
.tags a:visited {
    text-decoration: none;
    color: var(--text-light) !important;
}

footer {
	font-size: .9rem;
  padding: 1.5rem 5%;
  background-color: var(--accent-bg-light);
	color: var(--text-light);
}
footer a, footer a:visited {
	color: var(--text-light);
	text-decoration: underline;
}
footer a:hover, footer a:visited:hover {
  text-decoration: underline;
}
footer p {
  margin: 0;
}
footer p:not(:first-child) {
  margin-top: 1rem;
}
footer a:not(:first-child) {
  padding-left: .5rem;
}
@media (min-width: 600px) {
  footer {
    text-align: center;
  }
  footer p:not(:first-child) {
    display: inline-block;
  }
  footer p.last-line a:first-child {
    padding-left: .5rem;
  }
}

header p {
	text-align: left;
}
header pre {
	margin-bottom: 2rem;
	max-width:auto;
}

.post-date {
	margin-right: 1.5rem;
}

/*******************************************************************
 * Links
 */
a {
  color: var(--link);
}
a:visited {
    color: var(--link-visited);
}
.post-meta a:visited, .meta a:visited, .after-content a:visited {
    color: var(--link-alt);
}

a:hover, .after-content .interactions a:hover {
	opacity: .75;
}

/* Differentiating between normal content links and meta content links */
.meta a, .after-content a {
	text-decoration: none;
}
@media (prefers-color-scheme: dark) {
    .meta a, .after-content a {
        color: var(--link-alt);
    }
    .after-content .interactions a {
        color: var(--link);
    }
}
.after-content .interactions a:hover {
  color: var(--link);
}
/* @media (prefers-color-scheme: dark) { */
    .meta a:hover, footer a:hover, .after-content a:hover {
        opacity: .75;
    }
/* } */

a:focus, form:focus {
  background-color: var(--accent-bg-light);
	text-decoration: none;
}
nav a:focus {
  background-color: initial;
  outline: none;
}

a.anchor {
    text-decoration: none;
    color: var(--non-text-light);
    padding-right: .2rem;
}

/* a.anchor:hover { */
/*     text-decoration: underline; */
/* } */

/*******************************************************************
 * Post components
 */
#post-header h1 {
	margin-bottom: 0.4rem;
    font-family: var(--heading-font);
}
#post-header {
	margin-bottom: 2.5rem;
}
.post-meta, .post-list time, .tags {
    font-family: var(--alt-font);
}
.post-meta, .meta, footer {
	font-size: .9rem;
	color: var(--text-light);
}

section[itemprop="articlebody"] {
    font-family: var(--body-font);
}

section[itemprop="articlebody"].mono {
  font-family: var(--body-mono-font);
  background-color: var(--accent-bg-light);
  padding: 1rem 2rem;
}
section[itemprop="articlebody"].mono :is(h1, h2, h3, h4, h5, h6) {
	font-family: var(--body-mono-font);
}
div.callout {
  background-color: var(--accent-bg-light);
  padding: .5rem 2rem;
  padding-bottom: .5rem;
  /* border: 1px solid var(--border); */
  border-radius: var(--standard-border-radius);
}
div.callout::before {
  font-family: var(--alt-text);
  color: var(--text-light);
  font-size: .8rem;
  margin-bottom: 0;
}
div.callout p:first-child {
  margin-top: .5rem;
}
div.callout.note::before {
  content: "NOTE";
}
div.callout.note {
  border-left: 3px solid var(--accent);
}

#content div#main {
    padding-bottom: 1rem;
    margin-bottom: 1rem;
}

.footnotes {
    margin-top: 3rem;
	  font-size: .9rem;
}
.footnotes ol {
    margin-top: none;
}

ul.post-list {
    list-style: none;
    padding-left: 0;
}
.post-list h3, .post-list h2 {
    margin-bottom: 0.5rem;
    font-size: 1.2rem;
    font-weight: 500;
}
.post-list p {
    margin-top: 0;
    margin-bottom: .3rem;
}
.post-list time {
    color: var(--text-light);
}
.after-content {
  font-size: .9rem;
}
.interactions img:not(.icon) {
  height: 20px;
  width: auto;
  vertical-align: text-bottom;
}
.interactions img.icon {
  border-radius: 100%;
}
@media (max-width: 900px) {
  .interaction div:has(img.icon) {
    display: none;
  }
}
.after-content .interactions a:has(img):hover {
  text-decoration: none;
}
.interactions .interaction {
  margin-top: 1rem;
  margin-bottom: 1rem;

  display: flex;
  flex-direction: row;
  gap: 1rem;
  justify-content: end;
}
.interactions .interaction:not(:last-child) {
  margin-bottom: 2rem;
}
.interactions time {
  color: var(--text-light);
  font-family: var(--alt-font);
}
/*******************************************************************
 * Bookmarks
 */
.bookmarks h3 {
  margin-bottom: 0;
}
.bookmarks .excerpt, .bookmarks .date {
  color: var(--text-light);
  font-family: var(--alt-font);
  font-size: .9rem;
}
.bookmarks .excerpt {
  margin-top: 0;
}
/*******************************************************************
 * Chroma
 */
.chroma .lntable pre {
    border: 0;
    padding: 0;
}
.chroma .lntable {
    border: 1px solid var(--border);
    padding: .01em .1em;
}

/*******************************************************************
 * Forms
 */
textarea,
select,
input,
progress {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}
button,
.button,
a.button, /* extra specificity to override a */
input[type="submit"],
input[type="reset"],
input[type="button"] {
  border: 1px solid var(--button-border);
  background-color: var(--button-bg);
  color: var(--button-color);
  padding: 0.5rem 0.9rem;
  text-decoration: none;
  line-height: normal;
	transition: .4s;
}

.button[aria-disabled="true"],
input:disabled,
textarea:disabled,
select:disabled,
button[disabled] {
  cursor: not-allowed;
  background-color: var(--disabled);
  border-color: var(--disabled);
  color: var(--text-light);
}
input[type="range"] {
  padding: 0;
}
/* Set the cursor to '?' on an abbreviation and style the abbreviation to show that there is more information underneath */
abbr[title] {
  cursor: help;
  text-decoration-line: underline;
  text-decoration-style: dotted;
}
button:enabled:hover,
.button:not([aria-disabled="true"]):hover,
input[type="submit"]:enabled:hover,
input[type="reset"]:enabled:hover,
input[type="button"]:enabled:hover {
  background-color: var(--button-hover);
  cursor: pointer;
}

.button:focus-visible,
button:focus-visible:where(:enabled),
input:enabled:focus-visible:where(
  [type="submit"],
  [type="reset"],
  [type="button"]
) {
  outline: 2px solid var(--accent);
  outline-offset: 1px;
}
textarea,
select,
input,
button,
.button {
  font-size: inherit;
  font-family: inherit;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  border-radius: var(--standard-border-radius);
  box-shadow: none;
  max-width: 100%;
  display: inline-block;
}
textarea,
select,
input {
  color: var(--text);
  background-color: var(--bg);
  border: 1px solid var(--border);
}
label {
  display: block;
}
textarea:not([cols]) {
  width: 100%;
}

/* Add arrow to drop-down */
select:not([multiple]) {
  background-image: linear-gradient(45deg, transparent 49%, var(--text) 51%),
    linear-gradient(135deg, var(--text) 51%, transparent 49%);
  background-position: calc(100% - 15px), calc(100% - 10px);
  background-size: 5px 5px, 5px 5px;
  background-repeat: no-repeat;
  padding-inline-end: 25px;
}
*[dir="rtl"] select:not([multiple]) {
  background-position: 10px, 15px;
}

/* checkbox and radio button style */
input[type="checkbox"],
input[type="radio"] {
  vertical-align: middle;
  position: relative;
  width: min-content;
}

input[type="checkbox"] + label,
input[type="radio"] + label {
  display: inline-block;
}

input[type="radio"] {
  border-radius: 100%;
}

input[type="checkbox"]:checked,
input[type="radio"]:checked {
  background-color: var(--accent);
}

input[type="checkbox"]:checked::after {
  /* Creates a rectangle with colored right and bottom borders which is rotated to look like a check mark */
  content: " ";
  width: 0.18em;
  height: 0.32em;
  border-radius: 0;
  position: absolute;
  top: 0.05em;
  left: 0.17em;
  background-color: transparent;
  border-right: solid var(--bg) 0.08em;
  border-bottom: solid var(--bg) 0.08em;
  font-size: 1.8em;
  transform: rotate(45deg);
}
input[type="radio"]:checked::after {
  /* creates a colored circle for the checked radio button  */
  content: " ";
  width: 0.25em;
  height: 0.25em;
  border-radius: 100%;
  position: absolute;
  top: 0.125em;
  background-color: var(--bg);
  left: 0.125em;
  font-size: 32px;
}
/* Makes input fields wider on smaller screens */
@media only screen and (max-width: 720px) {
  textarea,
  select,
  input {
    width: 100%;
  }
}
/* Set a height for color input */
input[type="color"] {
  height: 2.5rem;
  padding:  0.2rem;
}
/* do not show border around file selector button */
input[type="file"] {
  border: 0;
}
